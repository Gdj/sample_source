<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<title>Normal scrolling - fullPage.js</title>
	<meta name="author" content="Alvaro Trigo Lopez" />
	<meta name="description" content="fullPage full-screen normal scrolling with autoScrolling." />
	<meta name="keywords"  content="fullpage,jquery,demo,screen,fullscreen,normal scroll,autoscrolling, scroll" />
	<meta name="Resource-type" content="Document" />

    
	<link rel="stylesheet" type="text/css" href="./js/library/fullpage/jquery.fullpage-2.9.7.css" />
	<link rel="stylesheet" type="text/css" href="./js/library/slick/slick-1.8.1.css"/>
       
  <!-- jQuery.js@1.12.1 -->
  <script type="text/javascript"  src="./js/library/jquery-1.12.1.min.js"></script> 
  <!-- fullPage.js@2.9.7 -->
  <script type="text/javascript" src="./js/library/fullpage/jquery.fullpage-2.9.7.js"></script>
  <!-- slick-carousel@1.8.1 -->
  <script type="text/javascript" src="./js/library/slick/slick-1.8.1.min.js"></script>
  
	<style>

		/* Style for our header texts
		* --------------------------------------- */
		h1{font-size: 5em;font-family: arial,helvetica;color: #fff;margin:0;}
		.intro p{color: #fff;}
		/* Centered texts in each section
		* --------------------------------------- */
		.section{text-align:center;}
		.footer_style { background-color: #333; color:#ccc; height: 50px;}

		/* Bottom menu
		* --------------------------------------- */
		#infoMenu li a {color: #fff;}


		#menu li {
		display:inline-block;
		margin: 10px;
		color: #000;
		background:#fff;
		background: rgba(255,255,255, 0.5);
		-webkit-border-radius: 10px;
				border-radius: 10px;
		}
		#menu li.active{background:#666;background: rgba(0,0,0, 0.5);color: #fff;}
		#menu li a{text-decoration:none;color: #000;}
		#menu li.active a:hover{color: #000;}
		#menu li:hover{background: rgba(255,255,255, 0.8);}
		#menu li a,
		#menu li.active a{
			padding: 9px 18px;
			display:block;
		}
		#menu li.active a{color: #fff;}
		#menu{
			position:fixed;top:0;left:0;
			width: 100%; height: 40px; padding: 0; 	margin:0;
			z-index: 70;
		}
      
        .js-sub4_con { position: relative; height: 50%; border: 1px solid #333  }
        .js-sub4_con .slick-slide { height: 100%; }
        
	</style>



</head>
<body>


<ul id="menu">
	<li data-menuanchor="firstPage" class="active"><a href="#firstPage">First slide</a></li>
	<li data-menuanchor="secondPage"><a href="#secondPage">Second slide</a></li>
	<li data-menuanchor="3rdPage"><a href="#3rdPage">Third slide</a></li>
	<li data-menuanchor="4rdPage"><a href="#4rdPage">4rdPage</a></li>
</ul>
	
<div id="fullpage">
	<div class="section" id="">
		<div class="intro">			
			<h1>Normal scrolling</h1>
			<p>With a linked menu</p>
			<p>download : <a href="https://github.com/alvarotrigo/fullPage.js/releases/tag/2.9.7" target="_blank">fullpage.js 2.9.7</a></p>
		</div>
	</div>
	<div class="section" id="">
      <div class="js-sub2_con">
	    <div class="slide" id="slide1">
			<div class="intro">
				<h1>URL get updated (#)</h1>
				<p>
					Easy to bookmark and share
				</p>
			</div>
		</div>
	    <div class="slide" id="slide2">
			<h1>Horizontal sliders!</h1>		
		</div>
		<div class="slide" id="slide3">
			<h1>Horizontal 222</h1>		
		</div>
      </div>
	</div>
	<div class="section" id="">
		<div class="intro">
			<h1>Just use </h1>
			<p>autoScrolling:false</p>
		</div>
	</div>	
	<div class="section" id="">
	
		<div class="slider js-sub4_con">
          <div>
              <h3>1</h3>
          </div>
          <div>
              <h3>2</h3>
          </div>
          <div>
              <h3>3</h3>
          </div>
          <div>
              <h3>4</h3>
          </div>
        </div>
        
	</div>
	<div class="section fp-auto-height footer_style" id="">
		<div class="">
			<p>copyright ⓒ TR. </p>
		</div>
	</div>

</div>


<script type="text/javascript">
  $(document).ready(function() {
    
    var _pageMain = 0;
    var _pageSub  = 0;
    $('#fullpage').fullpage({
      menu: '#menu',
      anchors: ['firstPage', 'secondPage', '3rdPage', '4rdPage'],
      sectionsColor: ['#C63D0F', '#1BBC9B', '#7E8F7C', '#fE8FfC'],
      //autoScrolling: false,
      navigation: true,
      navigationPosition: 'left',
      slidesNavigation: true,
        fitToSectionDelay: 0,
        fitToSection: false,
        scrollingSpeed: 800,
        responsiveHeight: 480,      
        css3: false,
      // ** 페이지를 불러온 후  
      afterLoad: function (anchorLink, index, direction, trigger ) {
        
        if (index == 1){
          $.fn.fullpage.setAllowScrolling(true);
          console.log("1_after: scroll");
        }   
        if (index == 2){
          console.log("2_after: hold");
          //$.fn.fullpage.silentMoveTo(2,0);
          $.fn.fullpage.setAllowScrolling(false);
        }
        if (index == 3){
          $.fn.fullpage.setAllowScrolling(true);
          console.log("1_after: scroll");
        }
        if (index == 4){
        
        }else{
        }
      },
      // ** 페이지를 떠날때
      onLeave : function (index, nextIndex, direction){
        if (index == 1 && direction == 'down'){
          console.log("onLeave: index 1 - down");
        }else if (index == 2 && direction == 'up'){
          console.log("onLeave: index 2 >1 - up");
        }else if (index == 2 && direction == 'down'){
          console.log("onLeave: index 2 >3 - donw");
        }else if (index == 3 && direction == 'up'){
          console.log("onLeave: index 3 >2 - up");
        }else if (index == 3 && direction == 'down'){
          console.log("onLeave: index 3 >4 - down");
        }else if (index == 4 && direction == 'up'){ 
          console.log("onLeave: index 4 >3 - up");
        }
    },
      // ** 세컨 슬라이드 왔을대
      afterSlideLoad: function(anchors, $main_page, $sub_page, $rl){        
        console.log("afterSlideLoad: ", anchors, $main_page, $sub_page, $rl);
        _pageMain = $main_page;
        _pageSub  = $sub_page;
      },
      // ** 세컨 슬라이드 떠날때
      onSlideLeave: function(anchors, $main_page, $sub_page, $rl){        
        //console.log("onSlideLeave: ", anchors, $main_page, $sub_page, $rl);
      }
    });
    // $.fn.fullpage.moveSectionUp();   // 이전 슬라이드
    // $.fn.fullpage.moveSectionDown(); // 다음 슬라이드  
    
    
    /* ============== .js-sub2_con ==============*/
    // wheel event
    var sub2_conTimeOut = null;
    var sub2_conOnes    = true;
    $('.js-sub2_con').on('mousewheel DOMMouseScroll', function(e){
      var E = e.originalEvent;
      delta = 0;
      if (E.detail) {
        delta = E.detail * -40;
      }else{
        delta = E.wheelDelta;
      }      
      if(delta < 0) { // wheel down
        //Next
        if(_pageSub == 2){
          if(sub2_conOnes){
            sub2_conOnes=false;
            $.fn.fullpage.moveSectionDown(); // mainPage
          }
          sub2_conTimeOut = setTimeout(function(){
            sub2_conOnes=true;
            clearTimeout(sub2_conTimeOut);
          },300);
        }else{
          $.fn.fullpage.moveSlideRight();
        }
      }else{ // wheel up
        // Prev
        if(_pageSub == 0){
          $.fn.fullpage.moveSectionUp(); // mainPage
        }else{
          $.fn.fullpage.moveSlideLeft();
        }
      }
    });

    
    
    /* ============== .js-sub4_con ==============*/
    $(".js-sub4_con").slick({
      fade: true,
      cssEase: 'linear',
      slidesToShow: 1,
      slidesToScroll: 1,
      arrows:false,
      pauseOnFocus:false,
      pauseOnHover:false,
      pauseOnDotsHover:false,
      autoplay: false,
      infinite:false,
      swipe:false,
      preventClicks: true,
      speed:1000,
      dots: false, 
      customPaging : function(slider, i) {
        var slideCount = i+1;
        return '<button type="button"><span>'+slideCount+'</span></button>';
      },
    });  
    $('.js-sub4_con').slick('slickPause');
    
    // wheel event
    $('.js-sub4_con').on('mousewheel DOMMouseScroll', function(e){
      var E = e.originalEvent;
      delta = 0;
      if (E.detail) {
        delta = E.detail * -40;
      }else{
        delta = E.wheelDelta;
      }
      if(delta < 0) { // wheel down
        $(this).slick('slickNext');
      }else{ // wheel up
        $(this).slick('slickPrev');  
      }
    });

    // touch event
    var startX, startY, endX, endY;
    $('.js-sub4_con').on('touchstart',function(event){
        startX = event.originalEvent.changedTouches[0].screenX;
        startY = event.originalEvent.changedTouches[0].screenY;
    });
    $(".js-sub4_con").on('touchmove',function(event){
        endX=event.originalEvent.changedTouches[0].screenX;
        endY=event.originalEvent.changedTouches[0].screenY;
        if(startY-endY > 20){ // down to up
            $(this).slick('slickNext');         
        }else if(endY-startY > 20){ // up to down
            $(this).slick('slickPrev');
        }
    });

    $(".js-sub4_con").on('beforeChange', function (event, slick, currentSlide, nextSlide) {
      $.fn.fullpage.setAllowScrolling(false);
      /*if (currentSlide === 0 && nextSlide === slick.$slides.length - 1) { // 왼쪽 진행일때
        $(".js-sub4_con").removeClass('left');
        $(".js-sub4_con").addClass('right');
      } else if (nextSlide > currentSlide || (currentSlide === (slick.$slides.length - 1) && nextSlide === 0 )) {
        $(".js-sub4_con").removeClass('right');
        $(".js-sub4_con").addClass('left');
      } else {
        $(".js-sub4_con").removeClass('left');
        $(".js-sub4_con").addClass('right');
      } */      
    });

    $(".js-sub4_con").on('afterChange', function (event, slick, currentSlide) {
      if(currentSlide==0){
        $.fn.fullpage.setAllowScrolling(true);
      }else if (slick.$slides.length-1 == currentSlide) {
        $.fn.fullpage.setAllowScrolling(true);
      }
    });
    
  });
</script>



</body>
</html>